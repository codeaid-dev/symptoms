<!DOCTYPE html>
<html>
  <!-- Created 2017/09 -->
  <!-- demonstration for symptoms check -->
  <head>
    <meta charset="utf-8">
    <title>Symptoms Level Check</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
      <form method="get">
      <div class="entry-title">
        <h2>What is the level of the symptoms?</h2>
        <h3>(その症状はどの程度ですか？)</h3>
      </div>

      <div class="row">
        <div class="mild col-xs-6">
          <p><span style="font-size: 40px;">Mild</span></p>
          <p>(少し、軽く)</p>
        </div>
        <div class="severe col-xs-6">
          <p><span style="font-size: 40px;">Severe</span></p>
          <p>(とても、ひどく)</p>
        </div>
      </div>
        <div class="chart">
          <div id="chart1"></div>
          <div id="chart-1"></div>
          <div id="chart2"></div>
          <div id="chart-2"></div>
          <div id="chart3"></div>
          <div id="chart-3"></div>
          <div id="chart4"></div>
          <div id="chart-4"></div>
          <div id="chart5"></div>
          <div id="chart-5"></div>
          <div id="chart6"></div>
          <div id="chart-6"></div>
          <div id="chart7"></div>
          <div id="chart-7"></div>
          <div id="chart8"></div>
          <div id="chart-8"></div>
          <div id="chart9"></div>
          <div id="chart-9"></div>
          <div id="chart10"></div>
          <div id="chart-10"></div>
        </div>

      <div class="level"><span id="num">1</span>%</div>
        <input type="range" name="level" id="level" min="0" max="100" step="10" value="0">
      </form>

      <div class="next">
        <button class="next-btn" onclick="setStorage();location.href = 'conditions.html'"><i class="fa fa-arrow-right"></i></button>
      </div>
      <div class="clear">
        <button class="clear-btn" onclick="removeStorage()">Clear</button>
      </div>

    </div>

    <script>
      // キャッシュによる表示をせず常にページをリロード
      window.addEventListener('pageshow', function (event) {
        if (event.persisted) {
          location.reload();
        }
      });
    </script>

    <script>
      // リアルタイムでレンジ値をページに表示
      var elem = document.querySelector('input[type="range"]');
      var rangeValue = function(){
        var newValue = elem.value;
        var target = document.querySelector('#num');
        target.innerHTML = newValue;

        // %に合わせてグラグを表示
        var num = newValue/10;
        var id = num+1;
        for (var i=num; i>0; i--) {
          document.getElementById('chart'+i).style.background = "transparent";
          document.getElementById('chart-'+i).style.background = "transparent";
        }
        for (var i=0; i<(10-num); i++,id++) {
          document.getElementById('chart'+id).style.background = "#ecf0f1";
          document.getElementById('chart-'+id).style.background = "#ecf0f1";
        }
      }
      var userAgent = window.navigator.userAgent.toLowerCase();
      if (userAgent.indexOf('trident/7') != -1) {
        console.log("in:msie");
        elem.addEventListener("change", rangeValue, false);
      } else {
        elem.addEventListener("input", rangeValue, false);
      }
    </script>

    <script src="js/storage.js"></script>
  </body>
</html>
